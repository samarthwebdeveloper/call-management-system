{"version":3,"file":"drag-provider.js","sourceRoot":"","sources":["../../../../modules/core/providers/drag-provider.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAQ3C,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AAWzD,IAAa,YAAY;IADzB;QAKW,UAAK,GAAU;YAClB,QAAQ,EAAE,KAAK;YACf,QAAQ,EAAE,KAAK;YACf,KAAK,EAAE,SAAS;SACnB,CAAC;IA4EN,CAAC;IArEU,qCAAc,GAArB,UAAsB,KAAgB,EAAE,GAAe;QACnD,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;IACvE,CAAC;IAMM,qCAAc,GAArB,UAAsB,KAAgB;QAClC,IAAM,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAE3D,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAe,CAAC;IAC1C,CAAC;IAMM,gCAAS,GAAhB,UAAiB,MAAyB;QACtC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACzB,CAAC;IAMM,kCAAW,GAAlB,UAAmB,QAA2B;QAC1C,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC7B,CAAC;IAQM,mCAAY,GAAnB,UAAoB,GAAa,EAAE,YAAoB,EAAE,YAAoB;QACzE,IAAI,CAAC,SAAS,EAAE,CAAC;QAEjB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;QACjD,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,EAAE,GAAG,EAAE,YAAY,CAAC,CAAC;IAC9D,CAAC;IAMM,+BAAQ,GAAf,UAAgB,KAAwC;QACpD,IAAI,CAAC,KAAK,gBAAO,IAAI,CAAC,KAAK,EAAK,KAAK,CAAC,CAAC;IAC3C,CAAC;IAMM,+BAAQ,GAAf,UAAgB,GAAmB;QAC/B,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;IAC9C,CAAC;IAKM,gCAAS,GAAhB;QACI,IAAI,CAAC,QAAQ,CAAC;YACV,QAAQ,EAAE,KAAK;YACf,QAAQ,EAAE,KAAK;YACf,KAAK,EAAE,SAAS;SACnB,CAAC,CAAC;IACP,CAAC;IACL,mBAAC;AAAD,CAAC,AApFD,IAoFC;AApFY,YAAY;IADxB,UAAU,EAAE;GACA,YAAY,CAoFxB;SApFY,YAAY","sourcesContent":["import { TagInputComponent } from './../../components/tag-input/tag-input';\nimport { TagModel } from '../accessor';\n\nimport { Injectable } from '@angular/core';\n\nexport declare interface DraggedTag {\n    index: number;\n    tag: TagModel;\n    zone: string;\n}\n\nimport { DRAG_AND_DROP_KEY } from '../../core/constants';\n\nexport declare interface State {\n    dragging: boolean,\n    dropping: boolean,\n    index: number\n}\n\nexport declare type StateProperty = keyof State;\n\n@Injectable()\nexport class DragProvider {\n    public sender: TagInputComponent;\n    public receiver: TagInputComponent;\n\n    public state: State = {\n        dragging: false,\n        dropping: false,\n        index: undefined\n    };\n\n    /**\n     * @name setDraggedItem\n     * @param event\n     * @param tag \n     */\n    public setDraggedItem(event: DragEvent, tag: DraggedTag): void {\n        event.dataTransfer.setData(DRAG_AND_DROP_KEY, JSON.stringify(tag));\n    }\n\n    /**\n     * @name getDraggedItem\n     * @param event \n     */\n    public getDraggedItem(event: DragEvent): DraggedTag {\n        const data = event.dataTransfer.getData(DRAG_AND_DROP_KEY);\n\n        return JSON.parse(data) as DraggedTag;\n    }\n\n    /**\n     * @name setSender\n     * @param sender \n     */\n    public setSender(sender: TagInputComponent): void {\n        this.sender = sender;\n    }\n    \n    /**\n     * @name setReceiver\n     * @param receiver \n     */\n    public setReceiver(receiver: TagInputComponent): void {\n        this.receiver = receiver;\n    }\n\n    /**\n     * @name onTagDropped\n     * @param tag \n     * @param indexDragged \n     * @param indexDropped \n     */\n    public onTagDropped(tag: TagModel, indexDragged: number, indexDropped: number): void {\n        this.onDragEnd();\n\n        this.sender.onRemoveRequested(tag, indexDragged);\n        this.receiver.onAddingRequested(false, tag, indexDropped);\n    }\n\n    /**\n     * @name setState\n     * @param state\n     */\n    public setState(state: {[K in StateProperty]?: State[K]}): void {\n        this.state = {...this.state, ...state};\n    }\n\n    /**\n     * @name getState\n     * @param key\n     */\n    public getState(key?: StateProperty): State | State[StateProperty] {\n        return key ? this.state[key] : this.state;\n    }\n\n    /**\n     * @name onDragEnd\n     */\n    public onDragEnd(): void {\n        this.setState({\n            dragging: false,\n            dropping: false,\n            index: undefined\n        });\n    }\n}"]}